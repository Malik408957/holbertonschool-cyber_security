#!/bin/bash
whois $1 | awk 'BEGIN{IGNORECASE=1;FS=":"} function t(s){gsub(/^ +| +$/,"",s); return s} /Registrant[[:space:]]*Name/ {r["Registrant Name"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*Organization/ {r["Registrant Organization"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*Street/ {r["Registrant Street"]=t(substr($0,index($0,":")+1))" "} /Registrant[[:space:]]*City/ {r["Registrant City"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*State/ {r["Registrant State/Province"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*Postal/ {r["Registrant Postal Code"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*Country/ {r["Registrant Country"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*Phone[[:space:]]*Ext/ {r["Registrant Phone Ext:"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*Phone/ {if(!r["Registrant Phone"]) r["Registrant Phone"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*Fax[[:space:]]*Ext/ {r["Registrant Fax Ext:"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*Fax/ {if(!r["Registrant Fax"]) r["Registrant Fax"]=t(substr($0,index($0,":")+1))} /Registrant[[:space:]]*Email/ {r["Registrant Email"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Name/ {r["Admin Name"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Organization/ {r["Admin Organization"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Street/ {r["Admin Street"]=t(substr($0,index($0,":")+1))" "} /Admin[[:space:]]*City/ {r["Admin City"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*State/ {r["Admin State/Province"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Postal/ {r["Admin Postal Code"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Country/ {r["Admin Country"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Phone[[:space:]]*Ext/ {r["Admin Phone Ext:"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Phone/ {if(!r["Admin Phone"]) r["Admin Phone"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Fax[[:space:]]*Ext/ {r["Admin Fax Ext:"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Fax/ {if(!r["Admin Fax"]) r["Admin Fax"]=t(substr($0,index($0,":")+1))} /Admin[[:space:]]*Email/ {r["Admin Email"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Name/ {r["Tech Name"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Organization/ {r["Tech Organization"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Street/ {r["Tech Street"]=t(substr($0,index($0,":")+1))" "} /Tech[[:space:]]*City/ {r["Tech City"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*State/ {r["Tech State/Province"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Postal/ {r["Tech Postal Code"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Country/ {r["Tech Country"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Phone[[:space:]]*Ext/ {r["Tech Phone Ext:"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Phone/ {if(!r["Tech Phone"]) r["Tech Phone"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Fax[[:space:]]*Ext/ {r["Tech Fax Ext:"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Fax/ {if(!r["Tech Fax"]) r["Tech Fax"]=t(substr($0,index($0,":")+1))} /Tech[[:space:]]*Email/ {r["Tech Email"]=t(substr($0,index($0,":")+1))} END{printf "Registrant Name,%s\n",r["Registrant Name"];printf "Registrant Organization,%s\n",r["Registrant Organization"];printf "Registrant Street,%s\n",r["Registrant Street"];printf "Registrant City,%s\n",r["Registrant City"];printf "Registrant State/Province,%s\n",r["Registrant State/Province"];printf "Registrant Postal Code,%s\n",r["Registrant Postal Code"];printf "Registrant Country,%s\n",r["Registrant Country"];printf "Registrant Phone,%s\n",r["Registrant Phone"];printf "Registrant Phone Ext:,%s\n",r["Registrant Phone Ext:"];printf "Registrant Fax,%s\n",r["Registrant Fax"];printf "Registrant Fax Ext:,%s\n",r["Registrant Fax Ext:"];printf "Registrant Email,%s\n",r["Registrant Email"];printf "Admin Name,%s\n",r["Admin Name"];printf "Admin Organization,%s\n",r["Admin Organization"];printf "Admin Street,%s\n",r["Admin Street"];printf "Admin City,%s\n",r["Admin City"];printf "Admin State/Province,%s\n",r["Admin State/Province"];printf "Admin Postal Code,%s\n",r["Admin Postal Code"];printf "Admin Country,%s\n",r["Admin Country"];printf "Admin Phone,%s\n",r["Admin Phone"];printf "Admin Phone Ext:,%s\n",r["Admin Phone Ext:"];printf "Admin Fax,%s\n",r["Admin Fax"];printf "Admin Fax Ext:,%s\n",r["Admin Fax Ext:"];printf "Admin Email,%s\n",r["Admin Email"];printf "Tech Name,%s\n",r["Tech Name"];printf "Tech Organization,%s\n",r["Tech Organization"];printf "Tech Street,%s\n",r["Tech Street"];printf "Tech City,%s\n",r["Tech City"];printf "Tech State/Province,%s\n",r["Tech State/Province"];printf "Tech Postal Code,%s\n",r["Tech Postal Code"];printf "Tech Country,%s\n",r["Tech Country"];printf "Tech Phone,%s\n",r["Tech Phone"];printf "Tech Phone Ext:,%s\n",r["Tech Phone Ext:"];printf "Tech Fax,%s\n",r["Tech Fax"];printf "Tech Fax Ext:,%s\n",r["Tech Fax Ext:"];printf "Tech Email,%s",r["Tech Email"] }'
