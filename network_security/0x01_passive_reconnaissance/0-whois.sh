#!/bin/bash
whois $1 | awk 'BEGIN{IGNORECASE=1;FS=":"} function t(s){gsub(/^[ \t]+|[ \t]+$/,"",s); return s} {k=t($1); v=t(substr($0,index($0,":")+1)); if(k=="Registrant Name") r["Registrant Name"]=v; else if(k=="Registrant Organization") r["Registrant Organization"]=v; else if(k=="Registrant Street") r["Registrant Street"]=v" "; else if(k=="Registrant City") r["Registrant City"]=v; else if(k=="Registrant State/Province") r["Registrant State/Province"]=v; else if(k=="Registrant Postal Code") r["Registrant Postal Code"]=v; else if(k=="Registrant Country") r["Registrant Country"]=v; else if(k=="Registrant Phone") r["Registrant Phone"]=v; else if(k=="Registrant Phone Ext") r["Registrant Phone Ext:"]=v; else if(k=="Registrant Fax") r["Registrant Fax"]=v; else if(k=="Registrant Fax Ext") r["Registrant Fax Ext:"]=v; else if(k=="Registrant Email") r["Registrant Email"]=v; else if(k=="Admin Name") r["Admin Name"]=v; else if(k=="Admin Organization") r["Admin Organization"]=v; else if(k=="Admin Street") r["Admin Street"]=v" "; else if(k=="Admin City") r["Admin City"]=v; else if(k=="Admin State/Province") r["Admin State/Province"]=v; else if(k=="Admin Postal Code") r["Admin Postal Code"]=v; else if(k=="Admin Country") r["Admin Country"]=v; else if(k=="Admin Phone") r["Admin Phone"]=v; else if(k=="Admin Phone Ext") r["Admin Phone Ext:"]=v; else if(k=="Admin Fax") r["Admin Fax"]=v; else if(k=="Admin Fax Ext") r["Admin Fax Ext:"]=v; else if(k=="Admin Email") r["Admin Email"]=v; else if(k=="Tech Name") r["Tech Name"]=v; else if(k=="Tech Organization") r["Tech Organization"]=v; else if(k=="Tech Street") r["Tech Street"]=v" "; else if(k=="Tech City") r["Tech City"]=v; else if(k=="Tech State/Province") r["Tech State/Province"]=v; else if(k=="Tech Postal Code") r["Tech Postal Code"]=v; else if(k=="Tech Country") r["Tech Country"]=v; else if(k=="Tech Phone") r["Tech Phone"]=v; else if(k=="Tech Phone Ext") r["Tech Phone Ext:"]=v; else if(k=="Tech Fax") r["Tech Fax"]=v; else if(k=="Tech Fax Ext") r["Tech Fax Ext:"]=v; else if(k=="Tech Email") r["Tech Email"]=v } END{printf "Registrant Name,%s\n",r["Registrant Name"];printf "Registrant Organization,%s\n",r["Registrant Organization"];printf "Registrant Street,%s\n",r["Registrant Street"];printf "Registrant City,%s\n",r["Registrant City"];printf "Registrant State/Province,%s\n",r["Registrant State/Province"];printf "Registrant Postal Code,%s\n",r["Registrant Postal Code"];printf "Registrant Country,%s\n",r["Registrant Country"];printf "Registrant Phone,%s\n",r["Registrant Phone"];printf "Registrant Phone Ext:,%s\n",r["Registrant Phone Ext:"];printf "Registrant Fax,%s\n",r["Registrant Fax"];printf "Registrant Fax Ext:,%s\n",r["Registrant Fax Ext:"];printf "Registrant Email,%s\n",r["Registrant Email"];printf "Admin Name,%s\n",r["Admin Name"];printf "Admin Organization,%s\n",r["Admin Organization"];printf "Admin Street,%s\n",r["Admin Street"];printf "Admin City,%s\n",r["Admin City"];printf "Admin State/Province,%s\n",r["Admin State/Province"];printf "Admin Postal Code,%s\n",r["Admin Postal Code"];printf "Admin Country,%s\n",r["Admin Country"];printf "Admin Phone,%s\n",r["Admin Phone"];printf "Admin Phone Ext:,%s\n",r["Admin Phone Ext:"];printf "Admin Fax,%s\n",r["Admin Fax"];printf "Admin Fax Ext:,%s\n",r["Admin Fax Ext:"];printf "Admin Email,%s\n",r["Admin Email"];printf "Tech Name,%s\n",r["Tech Name"];printf "Tech Organization,%s\n",r["Tech Organization"];printf "Tech Street,%s\n",r["Tech Street"];printf "Tech City,%s\n",r["Tech City"];printf "Tech State/Province,%s\n",r["Tech State/Province"];printf "Tech Postal Code,%s\n",r["Tech Postal Code"];printf "Tech Country,%s\n",r["Tech Country"];printf "Tech Phone,%s\n",r["Tech Phone"];printf "Tech Phone Ext:,%s\n",r["Tech Phone Ext:"];printf "Tech Fax,%s\n",r["Tech Fax"];printf "Tech Fax Ext:,%s\n",r["Tech Fax Ext:"];printf "Tech Email,%s\n",r["Tech Email"] }' > $1.csv




